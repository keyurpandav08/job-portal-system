<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Job Applications</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        .nav { margin-bottom: 20px; }
        .btn { padding: 10px 15px; margin: 5px; text-decoration: none; border-radius: 4px; display: inline-block; }
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .application-card { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 4px; }
        .current-status { font-weight: bold; margin: 10px 0; }
    </style>
</head>
<body>
<div class="container">
    <h2>Applications for: <span th:text="${jobTitle}">Job Title</span></h2>

    <div class="nav">
        <a th:href="@{/dashboard/employer}" class="btn btn-primary">Back to Dashboard</a>
        <a th:href="@{/logout}" class="btn btn-primary">Logout</a>
    </div>

    <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
    <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>

    <div th:if="${not #lists.isEmpty(applications)}">
        <p><strong>Total Applications:</strong> <span th:text="${applications.size()}">0</span></p>

        <div th:each="app : ${applications}" class="application-card">
            <h4>Applicant: <span th:text="${app.applicantName}">Applicant Name</span></h4>
            <p><strong>Applied On:</strong> <span th:text="${app.appliedAt}">Date</span></p>
            <p><strong>Resume:</strong>
                <a th:href="${app.resumeUrl}" target="_blank" th:text="${app.resumeUrl}">Resume URL</a>
            </p>

            <div class="current-status">
                <strong>Current Status:</strong> <span th:text="${app.status}">PENDING</span>
            </div>

            <!-- Simple Status Buttons -->
            <div>
                <form th:action="@{/dashboard/employer/applications/{appId}/status(appId=${app.id})}" method="post" style="display: inline;">
                    <input type="hidden" name="status" value="ACCEPTED">
                    <button type="submit" class="btn btn-success">Accept</button>
                </form>

                <form th:action="@{/dashboard/employer/applications/{appId}/status(appId=${app.id})}" method="post" style="display: inline;">
                    <input type="hidden" name="status" value="REJECTED">
                    <button type="submit" class="btn btn-danger">Reject</button>
                </form>
            </div>
        </div>
    </div>

    <div th:if="${#lists.isEmpty(applications)}">
        <p>No applications yet.</p>
    </div>
</div>
</body>
</html>